---
import HeroBar from "./Common.astro";
import { FormatRelativePath } from "@c/utils";
import { YmDesc } from "@config";

export interface Props {
  link?: Array<{
    label: string;
    href: string;
  }>;
}

const relativePath = FormatRelativePath(Astro.url.pathname);
const ymVer = relativePath.split("/")[0];

const { title, desc } = YmDesc[ymVer];
const link = Astro.props.link ?? [
  {
    label: "首页",
    href: "",
  },
  {
    label: "下载",
    href: "download",
  },
  {
    label: "字根练习",
    href: "zigen",
  },
  {
    label: "单字练习",
    href: "danzi",
  },
  {
    label: "反查",
    href: "search",
  },
];
const link2 = link.map(({ label, href }) => ({
  label,
  href: `${import.meta.env.BASE_URL}${ymVer}` + (href ? `/${href}` : ""),
}));

const href2label = Object.fromEntries(
  link2.map(({ label, href }) => [href, label])
);

const title2 =
  href2label[import.meta.env.BASE_URL + relativePath] + " - " + title;
---

<HeroBar title={title2} subt={desc} link={link2} />
